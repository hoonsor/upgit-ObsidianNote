---
obsidianUIMode: 
created: Saturday, December 10th 2022, 10:57:36 am
modified: Sunday, December 11th 2022, 3:04:10 pm
---
# 1111210- 手機刷機基本教學

## 1. 基本概念
- 安卓系統是基於 linux 的，因此他的管理權限與 linux 是非常相似的
### 1.1. 權限劃分
- 第一種是第三方軟體權限，他們的權限是最低的，例如開啟相機、定位、讀取檔案權限
- 第二種是用戶權限，例如設定鎖定密碼、重啟手機、解除安裝第三方軟體等操作，這些是普通軟體沒辦法做到的
- 第三種是超級用戶權限，就是 root 權限，就是可以完全控制手機，去實現手機系統本身不開放的功能，如修改手機型號、解除安裝系統軟體、對手機硬體的控制、CPU 超頻等等
### 1.2. 安卓的分區
#### 1.2.1. boot 分區

![01|500](https://raw.githubusercontent.com/hoonsor/upgit-Obsidian/main/2022/12/10/upgit_20221210_1670672617.png)
-  #h/red **boot 分區存放著啟動和引導文件，它包含了操作系統的 Kernel（內核）和 Ramdisk（虛擬內存）**
- 目前安卓 root 操作主要也是在修改 boot 分區，如改 cpu 的調度或 gpu 超頻
-  #h/green **如果 boot 分區被刪除或損壞，手機就不能正常啟動，會卡在開機的第一個 logo 畫面**

#### 1.2.2. system 分區

![01|500](https://raw.githubusercontent.com/hoonsor/upgit-Obsidian/main/2022/12/10/upgit_20221210_1670673560.png)

-  #h/red **system 分區包含了整個操作系統以及預裝軟件等，我們的系統升級或著是刷機通常就是在操作這個分區的**
- #h/green **system 分區損壞的話會卡在開機的第二個畫面，也就是開機動畫介面，無法進入系統**
![01|500](https://raw.githubusercontent.com/hoonsor/upgit-Obsidian/main/2022/12/10/upgit_20221210_1670673841.png)

- 與 system 分區相似的還有一個 vendor 分區，這個分區包含了開發廠商定製的一些應用和 libarary 文件，現在很多廠商也會直接將這些文件放入 system 分區中，方便後期的更新及維護

#### 1.2.3. data 分區

![01|500](https://raw.githubusercontent.com/hoonsor/upgit-Obsidian/main/2022/12/10/upgit_20221210_1670673991.png)

-  #h/red **data 分區就是數據分區，包含了手機使用中儲存的各種數據**，如果擦除這個分區，相當於清空所有軟體的數據，包括各種軟體的文件資料，還有各項系統設定值。 #h/green **不過擦除這個分區並不會影響到手機的正常啟動**

#### 1.2.4. cache 分區

![01|500](https://raw.githubusercontent.com/hoonsor/upgit-Obsidian/main/2022/12/10/upgit_20221210_1670674096.png)

-  #h/red **cache 分區就是安卓的緩存區**，可以幫助用戶快速打開系統最常訪問的數據以及應用程序，不用重複加載， #h/green **擦除這個區域不會影響到個人數據，新的緩存會在後續使用手機的過程中自動產生**

#### 1.2.5. recovery 分區

![01|500](https://raw.githubusercontent.com/hoonsor/upgit-Obsidian/main/2022/12/10/upgit_20221210_1670674279.png)

-  #h/red **recovery 分區就是恢復分區，這個分區可以用來恢復和更新其他分區的內容**，類似 windows 的 PE，可以理解為一個非常簡易的操作系統，除了恢復以外，它還可以對其他分區進行擦除、重啟等操作，所以 #h/green **我們以往刷機刷系統很多時候都是在 recovery 分區裡進行的**
- 不過近年來也出現了越來越多不存在 recovery 分區的手機，這是因為 #h/green **從安卓 7.0 開始引入了新的 OTA 升級方式 A/B System Updates**，這種升級方式是將 boot system 等分區變為兩套，叫做 slot a（boot_a,system_a...） 和 slot b（boot_b,system_b...），也就是常說的 AB 分區，平時用的叫做主分區，沒在用的那個是備用分區

![01|500](https://raw.githubusercontent.com/hoonsor/upgit-Obsidian/main/2022/12/10/upgit_20221210_1670675161.png)

- AB 分區的好處有以下兩點：
	- 系統升級時可以做到無縫升級，升級時先將備份分區升級，等升級完成後重啟手機，此時將備份分區跟主分區對調，即可完成無縫升級
	- 防止升級失敗時造成的卡機，當升級完成的系統無法重新啟動時，就會切換為原本使用的分區，如此可防止卡機
- 不過 AB 系統的缺點就是會佔用到兩倍的儲存空間，於是又有一個叫做 Virtual A/B 分區的產生，可以減少雙倍空間佔用的問題， #h/green **目前安卓 11 的機型普遍採用 VAB 的分區方式**
- 不論是 AB 分區或 VAB 分區，這樣的機型刷機會很麻煩，因為 recovery 分區被併到 boot 分區裡面了，想要刷第三方的 recovery 就會非常麻煩，因此 #h/red **更多時候建議不要使用 recovery 刷機（卡刷），而是通過底層的 fastboot 來操作（線刷）**

![01|500](https://raw.githubusercontent.com/hoonsor/upgit-Obsidian/main/2022/12/10/upgit_20221210_1670675282.png)

![01|500](https://raw.githubusercontent.com/hoonsor/upgit-Obsidian/main/2022/12/10/upgit_20221210_1670676538.png)

### 1.3. bootloader 與 fastboot 概念

![01|500](https://raw.githubusercontent.com/hoonsor/upgit-Obsidian/main/2022/12/10/upgit_20221210_1670675931.gif)

- 如果把 recovery 比做 PE，那麼 fastboot 所屬的 bootloader 就相當於電腦上的 BIOS/UEFI 了
-  #h/red **bootloader 顧名思義就是引導加載器，從長按電源的那一刻起，bootloader 就開始運作了，這段時間會初始化硬體設備，引導操作系統內核，在引導後期我們可以選擇進入一個叫做 fastboot 階段，這個就是很多人稱的刷機模式**
-  #h/red **fastboot 階段比 recovery 更加的底層，在 fastboot 下，我們可以通過連接電腦直接輸入命令來刷機，不管是解鎖設備、複製 boot iso 資料，還是線刷系統，很多操作都要通過 fastboot 來進行，這也是我們刷機時經常需要使用的一個模式**
- 常見品牌手機進入 fastboot 階段的方式：
-  #h/green **因為 fastboot 非常底層，所以就算手機刷壞變成磚了可能也可以嘗試使用 fastboot 恢復**

#### 1.3.1. 各常見手機品牌進入 fastboot 階段的方法
![01|500](https://raw.githubusercontent.com/hoonsor/upgit-Obsidian/main/2022/12/10/upgit_20221210_1670676226.png)

### 1.4. 電腦刷機事前準備配置工作
- 至安卓官方網站下載電腦端專用的 [Android SDK](https://developer.android.google.cn/studio/releases/platform-tools?hl=zh-cn) 並解壓縮
- 看到資料夾中有個 fastboot 應用程式的話就 OK
- 讓手機進入 fastboot 模式插上電腦，然後在具有 fastboot 的應用程式文件夾中打開命令提示字元（方法為在該資料夾網址列直接輸入 cmd 後按 enter）
- 接下來輸入 `fastboot devices` 檢測一下設備，如果能檢測到就表示連接成功了

![01|500](https://raw.githubusercontent.com/hoonsor/upgit-Obsidian/main/2022/12/11/upgit_20221211_1670740049.png)

- 如果檢測不到設備，那有可能是驅動程式出問題了，這樣的話就可以打開設備管理器，在其他設備>Android（未知設備）>更新驅動程式>瀏覽我的電腦以查找驅動程式>點選 adb 驅動程式所在位置（android_winusb.inf，[ADB/fastboot驅動程式下載位置](https://drive.google.com/file/d/1-SPyCQ0o5rXvT6oiqq72ybjc0ugVN2SO/view?usp=sharing)）

![01|500](https://raw.githubusercontent.com/hoonsor/upgit-Obsidian/main/2022/12/11/upgit_20221211_1670741031.gif)

- 成功把手機連接到電腦後，就可以使用一些 fastboot 指令對手機進行刷機了！

### 1.5. ADB（Andoird Debug Bridge，安卓調試橋）
- 這個是安卓提供給用戶調試設備的命令行工具，借助 ADB，我們就可以在電腦端通過各種命令來控制手機了，可以給手機安裝軟體、模擬點擊…等等
-  #h/red **adb 只是一個調試權限，使用 ADB 並不需要 root 權限，想要獲得最高權限還是需要 root**

![01|500](https://raw.githubusercontent.com/hoonsor/upgit-Obsidian/main/2022/12/11/upgit_20221211_1670741899.png)


### 1.6. 開發者選項與 OEM 解鎖
-  #h/red **進入手機的參數頁面，連續點擊 7 次的版本號後，就可以開啟開發者頁面選項，如果需要使用ADB或刷機，必須要將USB調試的選項打開**
- OEM 解鎖是任何刷機操作前都必須要先打開的選項，如果手機有的話就打開，沒有的話也沒關係，因為有些手機可能沒提供這個選項（有可能一樣可以刷，但要經過測試才知道了）

## 2. 相關資源連結

- [各種玩機網站、工具、命令匯總](http://wanji.jamcz.com/)
- [Android SDK（ADB和Fastboot電腦端工具）](https://developer.android.google.cn/studio/releases/platform-tools?hl=zh-cn)
- [ADB/Fastboot驅動程式](https://cz-jam.lanzouj.com/iZICY02v2k8j)
- [TWRP](https://twrp.me/)
- [Magisk](https://github.com/topjohnwu/Magisk)
- [小米解鎖工具](https://www.miui.com/unlock/index.html)
- [小米ROM下載](https://xiaomirom.com/series/)
- [小米刷機工具](https://www.youtube.com/redirect?event=video_description&redir_token=QUFFLUhqbkNnYzNnVzlMX2xrdXV1Z0c4SUVtOWR2cUVRUXxBQ3Jtc0tuaGJKMmNmQzVScTZ6cmltd0kzX1VxWUpKTGZKbVVWbWxZdTBUX0t2dlk5amZjdHViYU1ETGxfSHVOZUVDU2VoeHBITUpBV0p0eWxvTTluWTlld2s4VkhSN1lXTzJtem5qRTFWU1ZWTTMzektxWUtJNA&q=https%3A%2F%2Fcdn.alsgp0.fds.api.mi-img.com%2Fmicomm%2FMiFlash2020-3-14-0.rar&v=wz-ErdDf8AM)
- [One Plus ROM下載](https://www.youtube.com/redirect?event=video_description&redir_token=QUFFLUhqblNSektQek9uR0JOakNVdkdJcy1UcWFUMERYQXxBQ3Jtc0tsdmt1dC1CN3BGMHVuNkxMWWdpS0o1d1NUcjU3RmgwcDZ1YXU2Nk14WWJWNTV5YmUtNnJINGZwelRGeDhwTTZFVmtoVlo4QlpENlBUWU1DWTFPRVp4bGkzZUtaX0xiVFRkMzBPd05iNUpWYUxtSEJCUQ&q=https%3A%2F%2Fwww.oneplus.com%2Fcn%2Fsupport%2Fsoftwareupgrade&v=wz-ErdDf8AM)
- [三星刷機工具](https://odindownload.com/)
- [三星ROM下載](https://www.sammobile.com/firmwares/)
- [魅族ROOT連結](https://mroot.flyme.cn/)
- [OPPO解鎖](https://www.oppo.cn/thread-397164526-1)
- [OPPO ROM](https://www.coloros.com/rom)
- [Realme解鎖](https://www.youtube.com/redirect?event=video_description&redir_token=QUFFLUhqbTJSTHdmYXFSbUxvZkZBVWp5ZHI3OG10SnM4QXxBQ3Jtc0tua3pORlBjTXZKM2ZROUpOa3FBZU1aWHhhZThHcEwxUE5ja0RxSmFHZkVvUlVXOS14TWNSaXk4Z1JJYnlDQUtBN0V0ZmJwcDNIQW4yeWdKaUQydWw4QTJrWHlnQlItMXk2RUlTbm5Pcy1rc1J2MVl5Zw&q=https%3A%2F%2Fwww.realmebbs.com%2Fpost-details%2F1275426081138028544&v=wz-ErdDf8AM)
- [Realme刷機工具](https://www.youtube.com/redirect?event=video_description&redir_token=QUFFLUhqazQ3OVFiWGcyU2lDVC0zNVB0aFhnVGROOVJOQXxBQ3Jtc0tsWDI4WlhnaFpqQWt3S0ItVkhlUEh5eUp3dEtQaWdnbGNPRG5KYUFES2dyTWxfUlBVWkJRVlJ3TkJuazVaNDNzSkY4LXlxR3RNdVJLU01qbm1hM3M4N0tDeE96WWZYa1ktUzlKSjh2X3JCTEJmU1Rpcw&q=https%3A%2F%2Fwww.realmebbs.com%2Fpost-details%2F1271082970484060160&v=wz-ErdDf8AM)
- [Realme ROM](https://www.youtube.com/redirect?event=video_description&redir_token=QUFFLUhqa2N5LVhnazRWN3BYSndWWXZDNHZEZGhaY01CZ3xBQ3Jtc0ttVDJ2UlNmcnRhUUVCNThhVFBXRFhHMEJWTmVJUVVtUHVUVktYMi1XRUxEQWx4QUVhWlBGR3pwYW12RWRtYnhNeDZIZzlRRTl6NUUyOFJCaTRrUk8teVhtUVBYb0V4S1lDQjI1Z0RLSkRDVHhaU3NsYw&q=https%3A%2F%2Fwww.realme.com%2Fsupport%2Fsoftware-update&v=wz-ErdDf8AM)
- [Sony 解鎖](https://www.youtube.com/redirect?event=video_description&redir_token=QUFFLUhqazd0MXl6QVJnUmp1YTFGUmRPdFFuNGgzbU1wd3xBQ3Jtc0ttd2liWFhvTnpDN0dDRDlEcUM5RGMwQS1KX25MMlJBYnBvTVpqWmNVNk5UbW8zRDNUMUdtZTNPbmZZMXFDbl84cXAxTGZua1lSa0s5cWtoNmNuSFh2Y2xLSzJGSzFWanRaSmo1Xzhld2RRcW1EVEl5VQ&q=https%3A%2F%2Fdeveloper.sony.com%2Fdevelop%2Fopen-devices%2Fget-started%2Funlock-bootloader&v=wz-ErdDf8AM)
- [Sony ROM](https://xperifirm.com/)
- [MOTO解鎖](https://www.youtube.com/redirect?event=video_description&redir_token=QUFFLUhqbFNzTmUxdGpqR2IwMTgzenVwODVpNG9vMWxqd3xBQ3Jtc0tuU2hOdVRxdVo2Y2xPa1E4aDUtZ1daMUdxUTYxZTZJU292eF9QNGV4SXdYdl94ajVKbjBwUjNTV2Yya2RpMXVuOTZlOUNSRG5EaXNtbWIzLVpPSlExZzY0Sm5OUk5NbVh3VXc2MjRvS0RXWFg4ME1YSQ&q=https%3A%2F%2Fmotorola-global-portal.custhelp.com%2Fapp%2Fstandalone%2Fbootloader%2Funlock-your-device-a&v=wz-ErdDf8AM)
- [MOTO ROM](https://www.youtube.com/redirect?event=video_description&redir_token=QUFFLUhqbHhrdklyRjFEeDZOemZYQXhkeDI1VlhJRGk1QXxBQ3Jtc0tuQmV3Zk4xV2VIckpubTlTWV9ha1I0d1B4ekFHSGJOT1YxRkR2T1FlcU1iU05pbDZxRnk5RDJPVFlNWklaNXZ3Q1ZBblJWNzRjZHlIbFRiNDlZYU5ILV9HdWFwX1dZN3Vac2p6RGQ0SC1fdzNWLVROUQ&q=https%3A%2F%2Fmirrors.lolinet.com%2Ffirmware%2Fmotorola%2F&v=wz-ErdDf8AM)
- [payload-dumper解包工具](https://mrzzoxo.lanzouw.com/iR65zpaueyd)
- [酷安（玩機社區）](https://www.coolapk.com/)
- [XDA（海外玩機論壇）](https://forum.xda-developers.com/)